#!/usr/bin/env python

from CSPlib.pipeline import Pipeline
import argparse

p = argparse.ArgumentParser(description='Run the CSP pipeline')
p.add_argument('datadir', help='Folder where we can find the data')
p.add_argument('-workdir', default=None, type=str,
      help='Working folder with LOTS of space available')
p.add_argument('-prefix', default='ccd', 
      help='prefix for data files to process.')
p.add_argument('-suffix', default='c3.fits', 
      help='suffix for datafiles to process')
p.add_argument('-poll', default=10, 
   help="number of seconds between checks for new files")

args = p.parse_args()

pipe = Pipeline(args.datadir, args.workdir, args.prefix, args.suffix)

pipe.initialize()
pipe.run()


